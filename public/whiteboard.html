<!DOCTYPE html>
<h1>Create a Drawing!</h1>
<link href="wbStyle.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Baloo+Bhaijaan" rel="stylesheet">
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <div id="canvas"></div>
    <button class="button" onclick="changeColor();">Green</button>
    <button class="button buttonBlue" onclick="changeColor();">Blue</button>
    <button class="button buttonRed" onclick="changeColor();">Red</button>
    <button class="button buttonYellow" onclick="changeColor();">Yellow</button>
    <button class="button buttonGray" onclick="changeColor();">Gray</button>
    <button class="button buttonBlack" onclick="changeColor();">Black</button>
    
    <script>
        var colorBlue = "#008CBA";
        var colorGreen = "#4CAF50";
        var colorYellow = "#ffff33";
        var colorRed = "#f44336";
        var colorGray = "#e7e7e7";
        var colorBlack = "#555555";
        var currColor = colorBlack;
        var canvasDiv = document.getElementById('canvas');
        var canvas = document.createElement('canvas');
        canvas.setAttribute('width', '1000');
        canvas.setAttribute('height', '500');
        canvas.setAttribute('id', 'canvas');
        canvas.style.backgroundColor = "#ddd";
        canvasDiv.appendChild(canvas);
        if (typeof G_vmlCanvasManager != "undefined") {
            canvas = G_vmlCanvasManager.initElement(canvas);
        }
        context = canvas.getContext("2d");
        
        function changeColor() {
            if ("button") {
                currColor = colorGreen;
            }
            if ("buttonBlue") {
                currColor = colorBlue;
            }
            if ("buttonRed") {
                currColor = colorRed;
            }
            if ("buttonYellow") {
                currColor = colorYellow;
            }
            if ("buttonGray") {
                currColor = colorGray;
            }
            if ("buttonBlack") {
                currColor = colorBlack;
            }
        }
        
        $("#canvas").mousedown(function(e) {
            var mouseX = e.pageX-this.offsetLeft;
            var mouseY = e.pageY-this.offsetTop;
            
            paint = true;
            addClick(e.pageX-this.offsetLeft,e.pageY-this.offsetTop);
            redraw();
        });
        $("#canvas").mousemove(function(e) {
            if(paint) {
                addClick(e.pageX-this.offsetLeft,e.pageY-this.offsetTop,true);
                redraw();
            }
        });
        $("#canvas").mouseup(function(e) {
            paint = false;
        });
        $("#canvas").mouseleave(function(e) {
           paint = false; 
        });
        
        var clickX = new Array();
        var clickY = new Array();
        var clickDrag = new Array();
        var paint;
        
        function addClick(x,y,dragging) {
            clickX.push(x);
            clickY.push(y);
            clickDrag.push(dragging);
        }
        function redraw() {
            context.clearRect(0,0,context.canvas.width,context.canvas.height);
            context.strokeStyle = currColor;
            context.lineJoin = "round";
            context.lineWidth = 5;
            
            for (var i = 0; i < clickX.length; i++) {
                context.beginPath();
                if(clickDrag[i] && i) {
                    context.moveTo(clickX[i-1],clickY[i-1]);
                }
                else {
                    context.moveTo(clickX[i]-1, clickY[i]);
                }
                context.lineTo(clickX[i], clickY[i]);
                context.closePath();
                context.stroke();
            }
        }
    </script>
